(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{dWY9:function(e,a,t){"use strict";t.r(a),t.d(a,"_frontmatter",(function(){return o})),t.d(a,"default",(function(){return i}));t("91GP"),t("rGqo"),t("yt8O"),t("Btvt"),t("RW0V"),t("q1tI");var n=t("7ljp"),c=t("013z");t("qKvR");function r(){return(r=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}var o={},l={_frontmatter:o},s=c.a;function i(e){var a=e.components,t=function(e,a){if(null==e)return{};var t,n,c={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(c[t]=e[t]);return c}(e,["components"]);return Object(n.b)(s,r({},l,t,{components:a,mdxType:"MDXLayout"}),Object(n.b)("h2",null,"Introduction"),Object(n.b)("p",null,"Storefront is a simple shopping application that displays a catalog of antique computing devices, where users can search and buy products. It has a Web interface, and it relies on BFF (Backend for Frontend) services to interact with the backend services."),Object(n.b)("h2",null,"Pre-requisites:"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",r({parentName:"p"},{href:"https://www.java.com/en/"}),"Java"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",r({parentName:"p"},{href:"https://appsody.dev/"}),"Appsody")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://appsody.dev/docs/installing/macos"}),"Installing on MacOS")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://appsody.dev/docs/installing/windows"}),"Installing on Windows")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://appsody.dev/docs/installing/rhel"}),"Installing on RHEL")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://appsody.dev/docs/installing/ubuntu"}),"Installing on Ubuntu"))))),Object(n.b)("p",null,"For more details on installation, check ",Object(n.b)("a",r({parentName:"p"},{href:"https://appsody.dev/docs/installing/installing-appsody/"}),"this")," out."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Docker Desktop",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://docs.docker.com/docker-for-mac/"}),"Docker for Mac")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",r({parentName:"li"},{href:"https://docs.docker.com/docker-for-windows/"}),"Docker for Windows"))))),Object(n.b)("h2",null,"Running the application locally"),Object(n.b)("p",null,"Let us now deploy all the microservices of our storefront one by one locally."),Object(n.b)("h3",null,"Inventory"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Clone inventory repository")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/ibm-garage-ref-storefront/inventory-ms-quarkus.git\ncd inventory-ms-quarkus\n")),Object(n.b)("h4",null,"Deploy MySQL database"),Object(n.b)("br",null),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Start a MySQL Container with a database user, a password, and create a new database\ndocker run --name inventorymysql \\\n    -e MYSQL_ROOT_PASSWORD=admin123 \\\n    -e MYSQL_USER=dbuser \\\n    -e MYSQL_PASSWORD=password \\\n    -e MYSQL_DATABASE=inventorydb \\\n    -p 3306:3306 \\\n    -d mysql\n")),Object(n.b)("p",null,"If it is successfully deployed, you will see something like below."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS       PORTS                               NAMES\ne87f041c7da7   mysql     "docker-entrypoint.s…"   2 hours ago   Up 2 hours   0.0.0.0:3306->3306/tcp, 33060/tcp   inventorymysql\n')),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Now let us populate the MySQL with data.")),Object(n.b)("p",null,"Firstly, ",Object(n.b)("inlineCode",{parentName:"p"},"ssh")," into the MySQL container."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"docker exec -it inventorymysql bash\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Now, run the below command for table creation.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"mysql -udbuser -ppassword\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"This will take you to something like below.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"root@e87f041c7da7:/# mysql -udbuser -ppassword\nmysql: [Warning] Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 13\nServer version: 8.0.23 MySQL Community Server - GPL\n\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql>\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("inlineCode",{parentName:"p"},"scripts > mysql_data.sql"),". Copy the contents from ",Object(n.b)("a",r({parentName:"p"},{href:"https://github.com/ibm-garage-ref-storefront/inventory-ms-quarkus/blob/master/scripts/mysql_data.sql"}),"mysql_data.sql")," and paste the contents in the console.")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can exit from the console using ",Object(n.b)("inlineCode",{parentName:"p"},"exit"),"."))),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"mysql> exit\nBye\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"To come out of the container, enter ",Object(n.b)("inlineCode",{parentName:"li"},"exit"),".")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"root@d88a6e5973de:/# exit\n")),Object(n.b)("h4",null,"Deploy Inventory app"),Object(n.b)("br",null),Object(n.b)("p",null,"Run the below command."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Package the application using native profile\n./mvnw package -Pnative -Dquarkus.native.container-build=true\n\n# Build the docker image\ndocker build -f src/main/docker/Dockerfile.native -t inventory-ms-quarkus-native .\n\n# Run the application\ndocker run -it -d --rm -e quarkus.datasource.jdbc.url=jdbc:mysql://host.docker.internal:3306/inventorydb?useSSL=true -e quarkus.datasource.username=dbuser -e quarkus.datasource.password=password -p 8082:8080 inventory-ms-quarkus-native\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"You can also verify it as follows.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n')),Object(n.b)("h3",null,"Catalog"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Clone catalog repository")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/ibm-garage-ref-storefront/catalog-ms-quarkus.git\ncd catalog-ms-quarkus\n")),Object(n.b)("h4",null,"Deploy ElasticSearch"),Object(n.b)("br",null),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'# Start an Elasticsearch Container\ndocker run --name catalogelasticsearch \\\n      -e "discovery.type=single-node" \\\n      -p 9200:9200 \\\n      -p 9300:9300 \\\n      -d docker.elastic.co/elasticsearch/elasticsearch:6.3.2\n')),Object(n.b)("p",null,"If it is successfully deployed, you will see something like below."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n')),Object(n.b)("h4",null,"Deploy Catalog app"),Object(n.b)("br",null),Object(n.b)("p",null,"Run the below command."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Package the application using native profile\n./mvnw package -Pnative -Dquarkus.elasticsearch.hosts=http://localhost:9200 -Dibm.cn.application.client.InventoryServiceClient/mp-rest/url=http://localhost:8082/micro/inventory -Dquarkus.native.container-build=true\n\n# Build the docker image\ndocker build -f src/main/docker/Dockerfile.native -t catalog-ms-quarkus-native .\n\n# Run the application\ndocker run -it -d --rm -e quarkus.elasticsearch.hosts=http://host.docker.internal:9200 -e ibm.cn.application.client.InventoryServiceClient/mp-rest/url=http://host.docker.internal:8082/micro/inventory -p 8083:8080 catalog-ms-quarkus-native\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"You can also verify it as follows.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n')),Object(n.b)("h3",null,"Authentication using Keycloak"),Object(n.b)("p",null,"Keycloak is used for storing users and authenticating users. To configure it, refer ",Object(n.b)("a",r({parentName:"p"},{href:"https://cloudnativereference.dev/related-repositories/keycloak/"}),"Keycloak - JWT token generation"),"."),Object(n.b)("p",null,"Make sure you grab the ",Object(n.b)("inlineCode",{parentName:"p"},"client_secret"),". You need to pass it as a param in the below services."),Object(n.b)("h3",null,"Customer"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Clone customer repository")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/ibm-garage-ref-storefront/customer-ms-quarkus.git\ncd customer-ms-quarkus\n")),Object(n.b)("h4",null,"Deploy CouchDB"),Object(n.b)("br",null),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Start a CouchDB Container with a database user, and a password\ndocker run -d -e COUCHDB_USER='admin' -e COUCHDB_PASSWORD='password' -p 5984:5984 couchdb\n")),Object(n.b)("p",null,"If it is successfully deployed, you will see something like below."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\n8b4430086226   couchdb                                               "tini -- /docker-ent…"   2 days ago    Up 2 days    4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp       angry_davinci\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n1bdb13bf24cd   quay.io/keycloak/keycloak:12.0.2                      "/opt/jboss/tools/do…"   2 days ago    Up 2 days    8443/tcp, 0.0.0.0:8085->8080/tcp                 bold_elion\n')),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Populate the database with user information.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"cd populate\npython3 populate.py localhost 5984\ncd ..\n")),Object(n.b)("h4",null,"Deploy Customer app"),Object(n.b)("br",null),Object(n.b)("p",null,"Run the below command."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Package the application using native profile\n./mvnw package -Pnative -Dquarkus.native.container-build=true\n\n# Build the docker image\ndocker build -f src/main/docker/Dockerfile.native -t customer-ms-quarkus-native .\n\n# Run the application\ndocker run -it -d --rm -e ibm.cn.application.couchdb.client.CouchDBClientService/mp-rest/url=http://host.docker.internal:5984 -e couchuser=admin -e couchpassword=password -e quarkus.oidc.auth-server-url=http://host.docker.internal:8085/auth/realms/sfrealm -e quarkus.oidc.client-id=bluecomputeweb -e quarkus.oidc.credentials.secret=a297757d-d2cc-4921-8e66-971432a68826 -p 8087:8080 customer-ms-quarkus-native\n")),Object(n.b)("p",null,"Note: Set the ",Object(n.b)("inlineCode",{parentName:"p"},"quarkus.oidc.credentials.secret")," value to the value you grabbed earlier."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"You can also verify it as follows.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\n4e0d5679fb92   customer-ms-quarkus-native                            "./application -Dqua…"   2 hours ago   Up 2 hours   0.0.0.0:8087->8080/tcp                           ecstatic_lumiere\n8b4430086226   couchdb                                               "tini -- /docker-ent…"   2 days ago    Up 2 days    4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp       angry_davinci\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n1bdb13bf24cd   quay.io/keycloak/keycloak:12.0.2                      "/opt/jboss/tools/do…"   2 days ago    Up 2 days    8443/tcp, 0.0.0.0:8085->8080/tcp                 bold_elion\n')),Object(n.b)("h3",null,"Orders"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Clone orders repository")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/ibm-garage-ref-storefront/orders-ms-quarkus.git\ncd orders-ms-quarkus\n")),Object(n.b)("h4",null,"Deploy Mariadb"),Object(n.b)("br",null),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Start a MariaDB Container with a database user, a password, and create a new database\ndocker run --name ordersmysql \\\n    -e MYSQL_ROOT_PASSWORD=admin123 \\\n    -e MYSQL_USER=dbuser \\\n    -e MYSQL_PASSWORD=password \\\n    -e MYSQL_DATABASE=ordersdb \\\n    -p 3307:3306 \\\n    -d mariadb\n")),Object(n.b)("p",null,"If it is successfully deployed, you will see something like below."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\n4e0d5679fb92   customer-ms-quarkus-native                            "./application -Dqua…"   2 hours ago   Up 2 hours   0.0.0.0:8087->8080/tcp                           ecstatic_lumiere\n8b4430086226   couchdb                                               "tini -- /docker-ent…"   2 days ago    Up 2 days    4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp       angry_davinci\n9d65ba050ad1   mariadb                                               "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3307->3306/tcp                           ordersmysql\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n1bdb13bf24cd   quay.io/keycloak/keycloak:12.0.2                      "/opt/jboss/tools/do…"   2 days ago    Up 2 days    8443/tcp, 0.0.0.0:8085->8080/tcp                 bold_elion\n')),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Create the orders table.")),Object(n.b)("p",null,"Firstly, ",Object(n.b)("inlineCode",{parentName:"p"},"ssh")," into the MariaDB container."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"docker exec -it ordersmysql bash\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Now, run the below command for table creation.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"mysql -udbuser -ppassword\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"This will take you to something like below.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"root@5762edb59a86:/# mysql -udbuser -ppassword\nWelcome to the MariaDB monitor.  Commands end with ; or \\g.\nYour MariaDB connection id is 22\nServer version: 10.5.5-MariaDB-1:10.5.5+maria~focal mariadb.org binary distribution\n\nCopyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nMariaDB [(none)]>\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("inlineCode",{parentName:"p"},"scripts > mysql_data.sql"),". Copy the contents from ",Object(n.b)("a",r({parentName:"p"},{href:"./scripts/mysql_data.sql"}),"mysql_data.sql")," and paste the contents in the console.")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"You can exit from the console using ",Object(n.b)("inlineCode",{parentName:"p"},"exit"),"."))),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"MariaDB [(none)]> exit\nBye\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"To come out of the container, enter ",Object(n.b)("inlineCode",{parentName:"li"},"exit"),".")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"root@5762edb59a86:/# exit\n")),Object(n.b)("h4",null,"Deploy Orders app"),Object(n.b)("br",null),Object(n.b)("p",null,"Run the below command."),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Package the application using native profile\n./mvnw package -Pnative -Dquarkus.native.container-build=true\n\n# Build the docker image\ndocker build -f src/main/docker/Dockerfile.native -t orders-ms-quarkus-native .\n\n# Run the application\ndocker run -it -d --rm -e quarkus.datasource.jdbc.url=jdbc:mysql://host.docker.internal:3307/ordersdb?useSSL=true -e quarkus.datasource.username=dbuser -e quarkus.datasource.password=password -e quarkus.oidc.auth-server-url=http://host.docker.internal:8085/auth/realms/sfrealm -e quarkus.oidc.client-id=bluecomputeweb -e quarkus.oidc.credentials.secret=a297757d-d2cc-4921-8e66-971432a68826 -p 8086:8080 orders-ms-quarkus-native\n")),Object(n.b)("p",null,"Note: Set the ",Object(n.b)("inlineCode",{parentName:"p"},"quarkus.oidc.credentials.secret")," value to the value you grabbed earlier."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"You can also verify it as follows.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\n4e0d5679fb92   customer-ms-quarkus-native                            "./application -Dqua…"   2 hours ago   Up 2 hours   0.0.0.0:8087->8080/tcp                           ecstatic_lumiere\n8b4430086226   couchdb                                               "tini -- /docker-ent…"   2 days ago    Up 2 days    4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp       angry_davinci\nbc39c2469804   orders-ms-quarkus-native                              "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8086->8080/tcp                           dazzling_meitner\n9d65ba050ad1   mariadb                                               "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3307->3306/tcp                           ordersmysql\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n1bdb13bf24cd   quay.io/keycloak/keycloak:12.0.2                      "/opt/jboss/tools/do…"   2 days ago    Up 2 days    8443/tcp, 0.0.0.0:8085->8080/tcp                 bold_elion\n')),Object(n.b)("h3",null,"Storefront UI"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Clone Storefront-UI repository")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{className:"language-bash"}),"git clone https://github.com/ibm-garage-ref-storefront/storefront-ui.git\ncd storefront-ui\ngit checkout hp-quarkus-version\n")),Object(n.b)("h4",null,"Deploy Storefront UI"),Object(n.b)("br",null),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("inlineCode",{parentName:"p"},"config > default.json")," and change the ",Object(n.b)("inlineCode",{parentName:"p"},"client_secret")," to the one you grabbed earlier from keycloak.")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Run the below command."))),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),"# Build storefront ui docker image\nappsody build\n\n# Start the Storefront UI Container\ndocker run --name web \\\n  -e NODE_ENV=development \\\n  -p 3000:3000 \\\n  -d dev.local/web\n")),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"You can also verify it as follows.")),Object(n.b)("pre",null,Object(n.b)("code",r({parentName:"pre"},{}),'$ docker ps\nCONTAINER ID   IMAGE                                                 COMMAND                  CREATED       STATUS       PORTS                                            NAMES\ne616793340c7   dev.local/web                                         "container-entrypoin…"   2 hours ago   Up 2 hours   0.0.0.0:3000->3000/tcp, 8080/tcp                 web\n4e0d5679fb92   customer-ms-quarkus-native                            "./application -Dqua…"   2 hours ago   Up 2 hours   0.0.0.0:8087->8080/tcp                           ecstatic_lumiere\n8b4430086226   couchdb                                               "tini -- /docker-ent…"   2 days ago    Up 2 days    4369/tcp, 9100/tcp, 0.0.0.0:5984->5984/tcp       angry_davinci\nbc39c2469804   orders-ms-quarkus-native                              "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8086->8080/tcp                           dazzling_meitner\n9d65ba050ad1   mariadb                                               "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3307->3306/tcp                           ordersmysql\na5774b328b8d   catalog-ms-quarkus-native                             "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8083->8080/tcp                           inspiring_wozniak\n6c27955669e2   docker.elastic.co/elasticsearch/elasticsearch:6.3.2   "/usr/local/bin/dock…"   2 days ago    Up 2 days    0.0.0.0:9200->9200/tcp, 0.0.0.0:9300->9300/tcp   catalogelasticsearch\nb50a1ad23fed   inventory-ms-quarkus-native                           "./application -Dqua…"   2 days ago    Up 2 days    0.0.0.0:8082->8080/tcp                           pedantic_murdock\n20c0472e885f   mysql                                                 "docker-entrypoint.s…"   2 days ago    Up 2 days    0.0.0.0:3306->3306/tcp, 33060/tcp                inventorymysql\n1bdb13bf24cd   quay.io/keycloak/keycloak:12.0.2                      "/opt/jboss/tools/do…"   2 days ago    Up 2 days    8443/tcp, 0.0.0.0:8085->8080/tcp                 bold_elion\n')),Object(n.b)("p",null,"There you go, you deploy all the necessary services for storefront."),Object(n.b)("p",null,"Now, let us check the app out. You can access it at http://localhost:3000."),Object(n.b)("span",{className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1152px"}},"\n      ",Object(n.b)("span",r({parentName:"span"},{className:"gatsby-resp-image-background-image",style:{paddingBottom:"45.833333333333336%",position:"relative",bottom:"0",left:"0",backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABG0lEQVQoz4WQ3UoDMRCF8156I+iFWPFCqfhDhaLXPpai7+DPS4jCtqKi7YXddmO3u0k2OWYm0q7bZTvwMSEzc+YkYrd7iZ2Tc7ROL+ZsH3Wx1mqv4JDz+t4xNvY72GqfYfOgA6G1gVIaSut51h5jDKMrmBJ8x3PqDw2BmnAOsNZxroZtqFEI56gYoC5TWMhU+e0FZrlB4s+TaSDxZMpwbZrRawpaj7KGWLgKKwu/PVdhYDBK8fIxwfP7GE9vMaLPBMN4xuLcx4KLWXa4JOgdkpNY5hj/5Egz410Ft5RJbJRkJYcrBCnTH1GQWH8g8UoMJfpf0guZ8JfW/ZtZEqyKUnx7J1d3EW4fe7h56OH6PuK7ut5Gh3WNTYvLvb9ZCZoLwb1RcQAAAABJRU5ErkJggg==')",backgroundSize:"cover",display:"block"}})),"\n  ",Object(n.b)("img",r({parentName:"span"},{className:"gatsby-resp-image-image",alt:"Storefront",title:"Storefront",src:"/static/8a16eb848a9f6acb6488d0fe70b92b48/3cbba/web.png",srcSet:["/static/8a16eb848a9f6acb6488d0fe70b92b48/7fc1e/web.png 288w","/static/8a16eb848a9f6acb6488d0fe70b92b48/a5df1/web.png 576w","/static/8a16eb848a9f6acb6488d0fe70b92b48/3cbba/web.png 1152w","/static/8a16eb848a9f6acb6488d0fe70b92b48/0b124/web.png 1728w","/static/8a16eb848a9f6acb6488d0fe70b92b48/4ea69/web.png 2304w","/static/8a16eb848a9f6acb6488d0fe70b92b48/e449d/web.png 2869w"],sizes:"(max-width: 1152px) 100vw, 1152px",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",top:"0",left:"0"},loading:"lazy"})),"\n    "))}i.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-deployments-quarkus-mdx-83df4c71529b5a453abe.js.map